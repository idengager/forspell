#!/usr/bin/env ruby
require 'optimist'
require 'pry'
require 'backports/2.5.0/hash/slice'
require_relative '../lib/forspell'

OPTION_KEYS = %i[
  include_paths
  exclude_paths
  dictionary_name
  custom_dictionary_path
  format
  logfile
  no_output
].freeze

opts = Optimist.options do
  opt :include_paths, 'Include additional directories, default: lib, app', type: :strings
  opt :exclude_paths, 'Specify subdirectories to exclude', type: :strings
  opt :dictionary_name, 'Use another hunspell dictionary', default: 'en_US', type: :string
  opt :custom_dictionary_path, 'Add your custom dictionary by specifying path', type: :string
  opt :format, 'Formats: readable, YAML, JSON', default: 'readable', type: :string
  opt :logfile, 'Log to file', type: :string
  opt :no_output, ''
end

raise 'Please specify working directory or file' if ARGV.empty?

Forspell.new(opts.slice(*OPTION_KEYS).merge(path: ARGV.first)).process
